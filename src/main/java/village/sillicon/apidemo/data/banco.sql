CREATE DATABASE db_desafio
USE db_desafio

CREATE TABLE Pessoas(
    idPessoa INTEGER AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    cpf CHAR(11) UNIQUE NOT NULL,
    dataNascimento DATE NOT NULL
);

CREATE TABLE Contas(
    idConta INTEGER AUTO_INCREMENT PRIMARY KEY,
    idPessoa INTEGER NOT NULL,
    saldo DECIMAL(15,2) NOT NULL DEFAULT 0.00,
    limiteSaqueDiario DECIMAL(15,2) NOT NULL DEFAULT 1000.00,
    flagAtivo BOOLEAN NOT NULL DEFAULT TRUE,
    tipoConta INTEGER NOT NULL,
    dataCriacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (idPessoa) REFERENCES Pessoas(idPessoa)
);

CREATE TABLE Transacoes(
    idTransacao INTEGER AUTO_INCREMENT PRIMARY KEY,
    idConta INTEGER NOT NULL,
    valor DECIMAL(15,2) NOT NULL,
    dataTransacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (idConta) REFERENCES Contas(idConta)
);